syntax on
packloadall
colorscheme palenight
filetype plugin on



" =====
" Some basic defaults.
set nu
set ruler
set cursorline
set tabstop=4 softtabstop=4
set shiftwidth=4
set expandtab
set smartindent
set smartcase
set noswapfile
set nobackup
set incsearch
set background=dark
set colorcolumn=80



" =====
" Keymappings and leader key.
let mapleader=" "
nnoremap <leader><Left> :wincmd h<CR>
nnoremap <leader><Right> :wincmd l<CR>
nnoremap <leader><Up> :wincmd k<CR>
nnoremap <leader><Down> :wincmd j<CR>

nnoremap <leader>v :vsplit<CR>
nnoremap <leader>h :split<CR>

nnoremap <silent><leader><Up><Up> :move -2<CR>
nnoremap <silent><leader><Down><Down> :move +1<CR>

nnoremap <silent><leader>+ :vertical resize +5<CR>
nnoremap <silent><leader>- :vertical resize -5<CR>

inoremap (<CR> (<CR>)<C-c>O
inoremap {<CR> {<CR>}<C-c>O
inoremap [<CR> [<CR>]<C-c>O

function g:ToggleNuMode()
    if (&rnu == 1)
        set norelativenumber
        set number
    else
        set relativenumber
    endif
endfunc
nnoremap <leader>n :call g:ToggleNuMode()<CR>



" =====
" Everything NERDTree!
nnoremap <leader>qq :NERDTreeFind<CR>
nnoremap <leader>q :NERDTreeToggle<CR>



" =====
" Simple auto completion for golang.
" Be sure to have vim-go instaled.
" As for python, I use Kite which
" works out of the box.
function! OpenCompletion()
    if &filetype ==# 'go'

        if !pumvisible() && ((v:char >= 'a' && v:char <= 'z') || (v:char >= 'A' && v:char <= 'Z'))  
            call feedkeys("\<C-x>\<C-o>", "n")
        endif
    
    endif
endfunction

autocmd InsertCharPre * call OpenCompletion()
